# Pupervisor Configuration

processes:
  # PHP built-in server
  - name: php-server
    command: php
    args:
      - -S
      - localhost:8888
      - -t
      - /tmp
    autostart: false
    autorestart: false
    stopsignal: SIGTERM
    stoptimeout: 5

  # PHP script example
  - name: php-worker
    command: php
    args:
      - -r
      - |
        while(true) {
          echo date('Y-m-d H:i:s') . " - Worker running...\n";
          flush();
          sleep(2);
        }
    autostart: false
    autorestart: true
    startsecs: 3

  # PHP artisan queue worker (Laravel)
  # - name: laravel-queue
  #   command: php
  #   args:
  #     - artisan
  #     - queue:work
  #     - --sleep=3
  #     - --tries=3
  #   directory: /var/www/laravel
  #   environment:
  #     APP_ENV: production
  #   autostart: true
  #   autorestart: true

  # PHP-FPM (if installed)
  # - name: php-fpm
  #   command: php-fpm
  #   args:
  #     - --nodaemonize
  #   autostart: true
  #   autorestart: true

  # Simple test process
  - name: ping-test
    command: ping
    args:
      - -c
      - "10"
      - 127.0.0.1
    autostart: false
    autorestart: false
